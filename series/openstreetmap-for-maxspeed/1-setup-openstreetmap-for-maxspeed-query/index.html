<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1 - Setup Openstreetmap for Maxspeed Query | Enes Alt覺nkaya</title>
    <meta name="description" content="description">
    <link rel='canonical' href='https://blog.enesaltinkaya.com/series/openstreetmap-for-maxspeed/1-setup-openstreetmap-for-maxspeed-query/'/>
    <meta property="article:published_time" content="2018-03-04T00:00:00.000Z"><meta property="og:site_name" content="Enes Alt覺nkaya"><meta property="og:title" content="1 - Setup Openstreetmap for Maxspeed Query"><meta property="og:description" content="description"><meta property="og:type" content="website"><meta property="og:url" content="https://blog.enesaltinkaya.com/series/openstreetmap-for-maxspeed/1-setup-openstreetmap-for-maxspeed-query/"><meta property="og:image" content="https://blog.enesaltinkaya.com/img/osm.png"><meta name="twitter:title" content="1 - Setup Openstreetmap for Maxspeed Query"><meta name="twitter:description" content="description"><meta name="twitter:url" content="https://blog.enesaltinkaya.com/series/openstreetmap-for-maxspeed/1-setup-openstreetmap-for-maxspeed-query/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://blog.enesaltinkaya.com/img/osm.png"><meta name="twitter:label1" content="Written by"><meta name="twitter:data2" content="Enes Alt覺nkaya"><meta name="twitter:creator" content="@enesaltinkaya"><meta name="twitter:label2" content="Filed under"><meta name="twitter:data2" content="osm"><meta property="article:tag" content="osm"><meta property="fb:app_id" content="395864514296755">
    <link rel="preload" href="/assets/css/0.styles.bcd07aa9.css" as="style"><link rel="preload" href="/assets/js/app.0d764e58.js" as="script"><link rel="preload" href="/assets/js/9.d4050c44.js" as="script"><link rel="preload" href="/assets/js/1.63f5d9f8.js" as="script"><link rel="preload" href="/assets/js/36.9971fe1a.js" as="script"><link rel="preload" href="/assets/js/12.f2aee25d.js" as="script"><link rel="preload" href="/assets/js/14.fa24b8bd.js" as="script"><link rel="preload" href="/assets/js/11.93971300.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.bcd07aa9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="flex1 flex column maxheight maxwidth"><div id="fb-root"></div> <header class="flex valign spaces" data-v-ee835e64><a href="/" class="flex valign router-link-active" data-v-ee835e64><img src="/img/enes.png" alt="enes" data-v-ee835e64> <h1 data-v-ee835e64>Enes Alt覺nkaya</h1></a> <div class="search-box" data-v-ee835e64><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></header> <section class="section flex flex1 valign column"><!----> <div class="contentContainer"><div class="flex column contentTitle"><div class="flex spaces"><h1 itemprop="headline" class="flex1">1 - Setup Openstreetmap for Maxspeed Query</h1> <img width="125" height="85" src="/img/osm-small.png" alt="1 - Setup Openstreetmap for Maxspeed Query" class="noshrink"></div> <div class="flex spaces mb mt"><time datetime="2018-03-04" itemprop="dateCreated">2018-03-04</time> <div><a href="/osm" itemprop="programmingLanguage">
                    Osm
                </a></div></div></div> <div class="draft">
        DRAFT
    </div> <div class="content default"><p>In this series, I will share my findings about installing
Openstreetmap data on a local server.</p> <p>Specifically for querying maxspeed data. But of course you can import any type of data you want and query those.</p> <p>We will use latitude and longitude as input.</p> <p>For example, if we wanted to find out the maxspeed allowed for a road closest to
coordinates <em>51.4526, -2.5685</em> we would use the following postgres query.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
  maxspeed<span class="token punctuation">,</span> name<span class="token punctuation">,</span>
  ST_AsText<span class="token punctuation">(</span>ST_Transform<span class="token punctuation">(</span>way<span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> coordinates<span class="token punctuation">,</span>
  Ceil<span class="token punctuation">(</span>ST_Distance<span class="token punctuation">(</span><span class="token keyword">point</span><span class="token punctuation">.</span>geom<span class="token punctuation">,</span>way<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> distance
<span class="token keyword">FROM</span> 
  planet_osm_line<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token keyword">select</span> ST_Transform<span class="token punctuation">(</span>ST_SetSRID<span class="token punctuation">(</span>ST_Point<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2.5685</span><span class="token punctuation">,</span> <span class="token number">51.4526</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3857</span><span class="token punctuation">)</span> <span class="token keyword">as</span> geom<span class="token punctuation">)</span> <span class="token keyword">point</span>
<span class="token keyword">WHERE</span>
  maxspeed <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token operator">and</span>
  name <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token operator">and</span>
  ST_DWithin<span class="token punctuation">(</span><span class="token keyword">point</span><span class="token punctuation">.</span>geom<span class="token punctuation">,</span> way<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> distance
<span class="token keyword">LIMIT</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div><p>And the output;</p> <p><img src="/img/osm-maxspeed/osm-maxspeed-query-result.jpg" alt="osm maxspeed query result"></p> <p>After setting it all up, we will wrap this query in a webservice.<br>
I will be using Java - Spring, but you can use your favorite backend language.</p></div> <div class="flex shareContainer wrap"><div class="flex valign mr shareText">
        Share on
    </div> <div class="flex box"><div class="facebook share flex valign pointer"><svg viewBox="0 0 512 512" class="icon-facebook-square"><path d="m393 37c23 0 42 8 58 24 16 16 24 35 24 58l0 274c0 23-8 42-24 58-16 16-35 24-58 24l-54 0 0-170 57 0 9-66-66 0 0-42c0-11 3-19 7-24 5-5 13-8 26-8l35 0 0-60c-12-1-29-2-51-2-26 0-46 7-62 23-15 15-23 36-23 64l0 49-57 0 0 66 57 0 0 170-152 0c-23 0-42-8-58-24-16-16-24-35-24-58l0-274c0-23 8-42 24-58 16-16 35-24 58-24z"></path></svg>
            facebook
        </div> <div class="twitter share flex valign pointer"><svg viewBox="0 0 512 512" class="icon-twitter-square"><path d="m402 174c-10 5-22 8-34 10 13-8 22-19 26-33-12 7-25 12-38 14-12-12-26-19-44-19-16 0-30 6-42 18-12 12-18 26-18 42 0 6 1 10 2 14-25-1-48-8-69-19-22-11-40-25-55-44-6 10-9 20-9 30 0 22 9 39 26 50-9 0-18-2-28-7l0 1c0 14 5 27 14 38 10 11 21 18 35 20-5 2-10 3-14 3-3 0-6-1-11-1 4 12 11 21 21 29 10 8 22 12 35 12-23 17-47 26-75 26-5 0-10 0-14-1 28 18 59 27 92 27 21 0 41-3 60-10 18-7 34-16 48-27 13-12 25-25 34-39 10-15 17-31 22-47 4-16 7-32 7-48 0-3-1-6-1-8 12-8 22-19 30-31z m73-55l0 274c0 23-8 42-24 58-16 16-35 24-58 24l-274 0c-23 0-42-8-58-24-16-16-24-35-24-58l0-274c0-23 8-42 24-58 16-16 35-24 58-24l274 0c23 0 42 8 58 24 16 16 24 35 24 58z"></path></svg>
            twitter
        </div></div> <div class="linkedin share flex valign pointer"><svg viewBox="0 0 512 512" class="icon-linkedin-square"><path d="m104 404l66 0 0-198-66 0z m71-259c-1-10-4-19-11-25-6-6-15-10-26-10-11 0-20 4-27 10-7 6-11 15-11 25 0 9 4 17 10 24 7 7 16 10 27 10l0 0c11 0 20-3 27-10 7-7 11-15 11-24z m167 259l66 0 0-114c0-29-7-51-21-66-14-15-32-23-55-23-26 0-46 11-60 34l1 0 0-29-66 0c0 12 0 78 0 198l66 0 0-111c0-7 0-12 2-16 2-7 7-12 12-17 6-5 13-7 22-7 22 0 33 15 33 45z m133-285l0 274c0 23-8 42-24 58-16 16-35 24-58 24l-274 0c-23 0-42-8-58-24-16-16-24-35-24-58l0-274c0-23 8-42 24-58 16-16 35-24 58-24l274 0c23 0 42 8 58 24 16 16 24 35 24 58z"></path></svg>
        linkedin
    </div> <div><symbol id="icon-facebook-square" viewBox="0 0 512 512"><path d="m393 37c23 0 42 8 58 24 16 16 24 35 24 58l0 274c0 23-8 42-24 58-16 16-35 24-58 24l-54 0 0-170 57 0 9-66-66 0 0-42c0-11 3-19 7-24 5-5 13-8 26-8l35 0 0-60c-12-1-29-2-51-2-26 0-46 7-62 23-15 15-23 36-23 64l0 49-57 0 0 66 57 0 0 170-152 0c-23 0-42-8-58-24-16-16-24-35-24-58l0-274c0-23 8-42 24-58 16-16 35-24 58-24z"></path></symbol> <symbol id="icon-twitter-square" viewBox="0 0 512 512"><path d="m402 174c-10 5-22 8-34 10 13-8 22-19 26-33-12 7-25 12-38 14-12-12-26-19-44-19-16 0-30 6-42 18-12 12-18 26-18 42 0 6 1 10 2 14-25-1-48-8-69-19-22-11-40-25-55-44-6 10-9 20-9 30 0 22 9 39 26 50-9 0-18-2-28-7l0 1c0 14 5 27 14 38 10 11 21 18 35 20-5 2-10 3-14 3-3 0-6-1-11-1 4 12 11 21 21 29 10 8 22 12 35 12-23 17-47 26-75 26-5 0-10 0-14-1 28 18 59 27 92 27 21 0 41-3 60-10 18-7 34-16 48-27 13-12 25-25 34-39 10-15 17-31 22-47 4-16 7-32 7-48 0-3-1-6-1-8 12-8 22-19 30-31z m73-55l0 274c0 23-8 42-24 58-16 16-35 24-58 24l-274 0c-23 0-42-8-58-24-16-16-24-35-24-58l0-274c0-23 8-42 24-58 16-16 35-24 58-24l274 0c23 0 42 8 58 24 16 16 24 35 24 58z"></path></symbol> <symbol id="icon-linkedin-square" viewBox="0 0 512 512"><path d="m104 404l66 0 0-198-66 0z m71-259c-1-10-4-19-11-25-6-6-15-10-26-10-11 0-20 4-27 10-7 6-11 15-11 25 0 9 4 17 10 24 7 7 16 10 27 10l0 0c11 0 20-3 27-10 7-7 11-15 11-24z m167 259l66 0 0-114c0-29-7-51-21-66-14-15-32-23-55-23-26 0-46 11-60 34l1 0 0-29-66 0c0 12 0 78 0 198l66 0 0-111c0-7 0-12 2-16 2-7 7-12 12-17 6-5 13-7 22-7 22 0 33 15 33 45z m133-285l0 274c0 23-8 42-24 58-16 16-35 24-58 24l-274 0c-23 0-42-8-58-24-16-16-24-35-24-58l0-274c0-23 8-42 24-58 16-16 35-24 58-24l274 0c23 0 42 8 58 24 16 16 24 35 24 58z"></path></symbol></div></div> <div class="fbCommentsContainer flex flex1"><div data-href="https://blog.enesaltinkaya.com/series/openstreetmap-for-maxspeed/1-setup-openstreetmap-for-maxspeed-query/" data-order-by="time" data-width="692" data-numposts="100" class="fb-comments flex flex1"></div></div></div></section></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0d764e58.js" defer></script><script src="/assets/js/9.d4050c44.js" defer></script><script src="/assets/js/1.63f5d9f8.js" defer></script><script src="/assets/js/36.9971fe1a.js" defer></script><script src="/assets/js/12.f2aee25d.js" defer></script><script src="/assets/js/14.fa24b8bd.js" defer></script><script src="/assets/js/11.93971300.js" defer></script>
  </body>
</html>
